<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Solution Explanation - Advent of Code 2022 Solutions</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Documentation and explanations for Advent of Code 2022 solutions">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Advent of Code 2022 Solutions</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="day-4-solution-explanation"><a class="header" href="#day-4-solution-explanation">Day 4: Solution Explanation</a></h1>
<h2 id="approach"><a class="header" href="#approach">Approach</a></h2>
<p>Day 4's problem involves working with ranges and determining relationships between them. We need to check:</p>
<ol>
<li><strong>Part 1</strong>: Whether one range fully contains the other (subset relationship)</li>
<li><strong>Part 2</strong>: Whether two ranges overlap at all (intersection relationship)</li>
</ol>
<p>The core of the solution is to extend Rust's <code>RangeInclusive</code> type with functionality to check for these two conditions.</p>
<h2 id="implementation-details"><a class="header" href="#implementation-details">Implementation Details</a></h2>
<h3 id="range-extension-trait"><a class="header" href="#range-extension-trait">Range Extension Trait</a></h3>
<p>The most elegant part of this solution is defining a trait to extend the functionality of Rust's built-in <code>RangeInclusive</code> type:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait InclusiveRangeExt {
    fn is_subset(&amp;self, other: &amp;Self) -&gt; bool;
    fn is_overlapping(&amp;self, other: &amp;Self) -&gt; bool;
}
<span class="boring">}</span></code></pre></pre>
<p>This trait adds two methods to <code>RangeInclusive</code>:</p>
<ul>
<li><code>is_subset</code> - Checks if the other range is fully contained within this range</li>
<li><code>is_overlapping</code> - Checks if this range overlaps with the other range at all</li>
</ul>
<h3 id="implementing-the-trait"><a class="header" href="#implementing-the-trait">Implementing the Trait</a></h3>
<p>The implementation uses the <code>contains</code> method that's built into <code>RangeInclusive</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T&gt; InclusiveRangeExt for RangeInclusive&lt;T&gt;
    where T : PartialOrd {
    fn is_subset(&amp;self, other: &amp;Self) -&gt; bool {
        self.contains(other.start()) &amp;&amp; self.contains(other.end())
    }
    fn is_overlapping(&amp;self, other: &amp;Self) -&gt; bool {
        self.contains(other.start()) || self.contains(other.end())
    }
}
<span class="boring">}</span></code></pre></pre>
<p>The generic implementation works for any type <code>T</code> that can be compared (<code>PartialOrd</code>), which includes the integers we're using in this problem.</p>
<h3 id="parsing-the-input"><a class="header" href="#parsing-the-input">Parsing the Input</a></h3>
<p>The input consists of pairs of ranges in the format <code>a-b,c-d</code>. We parse this into pairs of <code>RangeInclusive&lt;u32&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let pairs = data.lines()
    .map(|line|
        line.split(|c:char| c.is_ascii_punctuation())
            .map(|c| u32::from_str(c).unwrap_or_else(|e| panic!("{e}")) )
            .collect::&lt;Vec&lt;_&gt;&gt;()
    )
    .map(|pair| {
        let [a, b, c, d] = pair[..] else { panic!("") };
        ((a..=b), (c..=d))
    })
    .collect::&lt;Vec&lt;_&gt;&gt;();
<span class="boring">}</span></code></pre></pre>
<p>The parsing works by:</p>
<ol>
<li>Splitting each line by punctuation characters (hyphens and commas)</li>
<li>Converting each part to a <code>u32</code></li>
<li>Creating a pair of ranges using the inclusive range syntax <code>a..=b</code></li>
</ol>
<h3 id="solving-part-1-full-containment"><a class="header" href="#solving-part-1-full-containment">Solving Part 1: Full Containment</a></h3>
<p>With our ranges parsed and the extension trait implemented, solving Part 1 is straightforward:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let out = pairs.iter()
    .filter(|(a,b)|
        a.is_subset(b) || b.is_subset(a)
    )
    .count();
<span class="boring">}</span></code></pre></pre>
<p>We check each pair to see if either range is a subset of the other, and count the number of pairs that satisfy this condition.</p>
<h3 id="solving-part-2-overlapping"><a class="header" href="#solving-part-2-overlapping">Solving Part 2: Overlapping</a></h3>
<p>Similarly, for Part 2, we count pairs where ranges overlap at all:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let out = pairs.iter()
    .filter(|(a,b)|
        a.is_overlapping(b) || b.is_overlapping(a)
    )
    .count();
<span class="boring">}</span></code></pre></pre>
<h2 id="alternative-solutions"><a class="header" href="#alternative-solutions">Alternative Solutions</a></h2>
<h3 id="direct-range-comparison"><a class="header" href="#direct-range-comparison">Direct Range Comparison</a></h3>
<p>Instead of using a trait extension, we could have compared range endpoints directly:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Check if range a fully contains range b
fn is_subset(a: &amp;(u32, u32), b: &amp;(u32, u32)) -&gt; bool {
    a.0 &lt;= b.0 &amp;&amp; a.1 &gt;= b.1
}

// Check if ranges a and b overlap
fn is_overlapping(a: &amp;(u32, u32), b: &amp;(u32, u32)) -&gt; bool {
    a.0 &lt;= b.1 &amp;&amp; a.1 &gt;= b.0
}
<span class="boring">}</span></code></pre></pre>
<p>This approach would use tuples instead of ranges, which is simpler but less expressive.</p>
<h3 id="using-set-operations"><a class="header" href="#using-set-operations">Using Set Operations</a></h3>
<p>Another approach could model ranges as sets and use set operations:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashSet;

fn range_to_set(start: u32, end: u32) -&gt; HashSet&lt;u32&gt; {
    (start..=end).collect()
}

fn is_subset(a: &amp;HashSet&lt;u32&gt;, b: &amp;HashSet&lt;u32&gt;) -&gt; bool {
    a.is_subset(b) || b.is_subset(a)
}

fn is_overlapping(a: &amp;HashSet&lt;u32&gt;, b: &amp;HashSet&lt;u32&gt;) -&gt; bool {
    !a.is_disjoint(b)
}
<span class="boring">}</span></code></pre></pre>
<p>However, this would be less efficient for large ranges due to the memory required to store every integer in each range.</p>
<h2 id="time-and-space-complexity"><a class="header" href="#time-and-space-complexity">Time and Space Complexity</a></h2>
<ul>
<li><strong>Time Complexity</strong>: O(n) where n is the number of range pairs, since we process each pair once with constant-time operations.</li>
<li><strong>Space Complexity</strong>: O(n) to store the parsed pairs.</li>
</ul>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>This solution demonstrates how Rust's trait system can be used to extend existing types with new functionality. By using trait extensions, we achieve an elegant and readable solution that clearly expresses the problem's domain concepts.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../day4/problem.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../day4/code.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../day4/problem.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../day4/code.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
